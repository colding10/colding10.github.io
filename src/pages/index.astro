---
import BlogCard from '@/components/BlogCard.astro'
import Link from '@/components/Link.astro'
import PageHead from '@/components/PageHead.astro'
import { buttonVariants } from '@/components/ui/button'
import { SITE } from '@/consts'
import Layout from '@/layouts/Layout.astro'
import { getRecentPosts } from '@/lib/data-utils'

const blog = await getRecentPosts(SITE.featuredPostCount)
---

<Layout class="max-w-3xl">
	<PageHead slot="head" title="Home" />

	<!-- Hero Section -->
	<section class="mt-8 mb-16">
		<div class="space-y-4">
			<p class="text-muted-foreground text-sm tracking-widest uppercase">
				CTF Player / Reverse Engineer
			</p>
			<h1 class="text-4xl font-bold">
				Hi! I'm <span class="text-primary">cold</span>
			</h1>
			<p class="text-muted-foreground max-w-xl text-lg leading-relaxed">
				This is my site where I'll put occasional <Link
					href="https://en.wikipedia.org/wiki/Capture_the_flag_(cybersecurity)"
					class="text-foreground hover:text-primary underline transition-colors"
					external>CTF</Link
				> writeups, things I learn, and other random stuff! Hopefully you
				find an occasional gem in this vast heap of yap here.
			</p>
		</div>
	</section>

	<!-- Latest Posts Section -->
	<section class="space-y-8">
		<div class="flex items-center justify-between">
			<h2 class="text-2xl font-semibold">Latest posts</h2>
			<Link
				href="/blog"
				class={buttonVariants({ variant: 'outline', size: 'sm' }) +
					' group'}
			>
				View all <span
					class="ml-1.5 transition-transform group-hover:translate-x-1"
					>&rarr;</span
				>
			</Link>
		</div>

		<div class="space-y-6">
			{blog.map((post) => <BlogCard entry={post} />)}
		</div>
	</section>

</Layout>
