---
import Breadcrumbs from '@/components/Breadcrumbs.astro'
import PageHead from '@/components/PageHead.astro'
import Layout from '@/layouts/Layout.astro'

type OppEntry = {
  name: string
  alias?: string
  reasons: string[]
  artifacts?: {
    type: 'image' | 'link' | 'quote'
    url?: string
    content: string
    description?: string
  }[]
  rant: string
  severity: 'low' | 'medium' | 'high' | 'maximum'
}

const opps: OppEntry[] = [
  {
    name: 'BlitzHack',
    alias: 'the account sharers and yappers',
    reasons: [
      'shared account in scriptCTF 2025 (and tried to get HS prizes)',
      'lost anyways to a team of 4 ppl',
      'yapped too hard trying to defend themselves with stupid logic',
    ],
    artifacts: [
      {
        type: 'quote',
        content:
          "\"The problem isn't with you all having >4 people -- UofT did this (they weren't playing for prizes, and were fine not receiving prizes), it's that your team member count isn't transparent, and seemingly your team is trying to get a high school division prize while having >4 people would disallow that\"",
        description: 'well said by my goat cbass',
      },
      {
        type: 'quote',
        content: 'more than 6 ips with different locations',
        description: 'from the admins about the shared team account',
      },
      {
        type: 'quote',
        content:
          '<@947505557844135977> <@762607955949649941> <@131614435067297792> <@324183834935689236> <@732127498019799041> <@748467604531839039>  <@519736601262424090> <@867057455560261663> hello >4 players on BlitzHack üíÄ  (not saying all of these players here played, but >>>4 of them are being active/implying that they are solving or working on challs, and there is no indication that they are on another team that isnt BlitzHack) all but 1nvi5!bl3 and demonster clearly demonstrated that they are looking at/working on challenges',
        description:
          'from me, a lot of these ppl got real quiet. the others gave bad logic. i am sorry to the few (<2) ppl who i may have falsely accused, but the others (which is way more than 4) did not defend themselves or gave terrible arguments',
      },
      {
        type: 'link',
        url: 'https://github.com/example',
        content: 'Their sus repository',
        description: 'Evidence of their crimes',
      },
    ],
    rant: 'i dont have a problem with the team playing with >4 players, or with any of the members of the team indivdually. instead, my issue is that when accused/questioned about a potential shared account, instead of defending themselves with valid arugments/evidence, they instead accused others and tried to use the logic "well if im cheating you could be too", or "where is your proof that these guys (who are in the server, solving challenges, and ADDED TO TEAM WEBSITE DURING CTF) are actually solving for us?". this is makes us suspicisou taht they are 1) not legit (having >4 players) 2) having something to hide. anyways, none of this would not have been an issue if the team said "ok, we have >4 players, we will not get prizes". instead, they tried to get prizes, which is an issue',
    severity: 'medium',
  },
]

const getSeverityColor = (severity: string) => {
  switch (severity) {
    case 'low':
      return 'bg-green-100 text-green-800 border-green-200 dark:bg-green-950 dark:text-green-200 dark:border-green-800'
    case 'medium':
      return 'bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-950 dark:text-yellow-200 dark:border-yellow-800'
    case 'high':
      return 'bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-950 dark:text-orange-200 dark:border-orange-800'
    case 'maximum':
      return 'bg-red-100 text-red-800 border-red-200 dark:bg-red-950 dark:text-red-200 dark:border-red-800'
    default:
      return 'bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700'
  }
}
---

<Layout class="max-w-4xl">
  <PageHead
    slot="head"
    title="Opps"
    description="My list of enemies (jokingly, of course)"
  />
  <Breadcrumbs items={[{ label: 'Opps', icon: 'lucide:skull' }]} />

  <section aria-labelledby="opps-title" class="font-mono">
    <h1 id="opps-title" class="mt-5 text-3xl font-bold">Opps List</h1>
    <p class="text-muted-foreground mt-2">
      My enemies list (totally joking, please don't sue me)
    </p>

    <div
      class="mt-4 rounded-lg border border-red-200 bg-red-50 p-4 dark:border-red-800 dark:bg-red-950/20"
    >
      <h2 class="mb-2 text-sm font-semibold text-red-800 dark:text-red-200">
        ‚ö†Ô∏è DISCLAIMER
      </h2>
      <p class="text-xs text-red-700 dark:text-red-300">
        This is all in good fun! These are not real enemies and this is purely
        comedic content. If you're mentioned here, it's probably because I like
        you enough to roast you. üòÑ. Or you made some sort of invalid argument
        that PMO.
      </p>
    </div>

    <div class="bg-secondary/30 mt-4 rounded-lg border p-4">
      <div class="flex flex-wrap gap-6 text-sm">
        <div>
          <span class="text-muted-foreground">Total Opps:</span>
          <span class="ml-1 font-semibold">{opps.length}</span>
        </div>
      </div>
    </div>

    {
      opps.length === 0 ? (
        <div class="py-12 text-center">
          <div class="mb-4 text-6xl">üïäÔ∏è</div>
          <h2 class="mb-2 text-xl font-semibold">No Enemies Found</h2>
          <p class="text-muted-foreground">
            Surprisingly, I'm at peace with everyone right now. This is
            suspicious...
          </p>
        </div>
      ) : (
        <div class="mt-8 space-y-8">
          {opps.map((opp, index) => (
            <div class="bg-card rounded-lg border p-6">
              {/* Header */}
              <div class="mb-4 flex items-start justify-between">
                <div>
                  <h2 class="text-xl font-bold">{opp.name}</h2>
                  {opp.alias && (
                    <p class="text-muted-foreground text-sm italic">
                      aka "{opp.alias}"
                    </p>
                  )}
                </div>
                <span
                  class={`rounded-full border px-2 py-1 text-xs font-medium ${getSeverityColor(opp.severity)}`}
                >
                  {opp.severity.toUpperCase()}
                </span>
              </div>

              {/* Reasons */}
              <div class="mb-6">
                <h3 class="mb-3 flex items-center text-lg font-semibold">
                  <span class="mr-2">üö©</span>
                  Crimes Against Humanity
                </h3>
                <ul class="space-y-2">
                  {opp.reasons.map((reason) => (
                    <li class="flex items-start">
                      <span class="mt-1 mr-2 text-xs text-red-500">‚óè</span>
                      <span class="text-sm">{reason}</span>
                    </li>
                  ))}
                </ul>
              </div>

              {/* Artifacts */}
              {opp.artifacts && opp.artifacts.length > 0 && (
                <div class="mb-6">
                  <h3 class="mb-3 flex items-center text-lg font-semibold">
                    <span class="mr-2">üìÅ</span>
                    Evidence Locker
                  </h3>
                  <div class="space-y-3">
                    {opp.artifacts.map((artifact) => (
                      <div class="bg-secondary/30 rounded-lg border p-3">
                        {artifact.type === 'quote' && (
                          <div>
                            <div class="bg-muted mb-2 rounded p-2 font-mono text-sm">
                              <pre class="whitespace-pre-wrap">
                                {artifact.content}
                              </pre>
                            </div>
                            {artifact.description && (
                              <p class="text-muted-foreground text-xs italic">
                                {artifact.description}
                              </p>
                            )}
                          </div>
                        )}

                        {artifact.type === 'link' && (
                          <div>
                            <a
                              href={artifact.url}
                              target="_blank"
                              rel="noopener noreferrer"
                              class="text-primary text-sm font-medium hover:underline"
                            >
                              üîó {artifact.content}
                            </a>
                            {artifact.description && (
                              <p class="text-muted-foreground mt-1 text-xs">
                                {artifact.description}
                              </p>
                            )}
                          </div>
                        )}

                        {artifact.type === 'image' && (
                          <div>
                            <img
                              src={artifact.url}
                              alt={artifact.description || artifact.content}
                              class="mb-2 h-auto max-w-full rounded border"
                            />
                            <p class="text-muted-foreground text-xs">
                              {artifact.description || artifact.content}
                            </p>
                          </div>
                        )}
                      </div>
                    ))}
                  </div>
                </div>
              )}

              <div>
                <h3 class="mb-3 flex items-center text-lg font-semibold">
                  <span class="mr-2">üí≠</span>
                  My Thoughts
                </h3>
                <div class="bg-muted/50 border-primary rounded-lg border-l-4 p-4">
                  <p class="text-sm leading-relaxed italic">"{opp.rant}"</p>
                </div>
              </div>

              <div class="text-muted-foreground mt-4 border-t pt-4 text-right text-xs">
                Opp #{index + 1} ‚Ä¢ Added to the list with üíî
              </div>
            </div>
          ))}
        </div>
      )
    }

    <div class="mt-12 text-center">
      <div class="bg-secondary/30 rounded-lg border p-6">
        <h2 class="mb-2 text-lg font-semibold">
          Think you belong on this list?
        </h2>
        <p class="text-muted-foreground mb-4 text-sm">
          DM me @cold10 on Discord if you've done something particularly heinous
          recently.
        </p>
        <p class="text-muted-foreground text-xs italic">
          (Or if you want to be removed from it... we can negotiate üëÄ)
        </p>
      </div>
    </div>
  </section>
</Layout>
